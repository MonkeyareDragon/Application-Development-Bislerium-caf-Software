<!-- Razor page for viewing form data saved in Json file-->
@page "/paymentData"
@using BisleriumCafé.Data.Services

<h3>ViewFormData</h3>

<table class="table">
    <thead>
        <tr>
            <th>Customer Name</th>
            <th>Customer Email</th>
            <th>Coffee Name</th>
            <th>Add-Ins</th>
            <th>Payment Status</th>
            <th>Payment: Date and Time</th>
            <th>Total Price</th>
        </tr>
    </thead>
    <tbody>
        <!-- Loop through each form data -->
        @foreach (var paymentData in PaymentServices.RetrieveFormData())
        {
            <tr>
                <!-- Display basic form data -->
                <td>@paymentData.CustomerName</td>
                <td>@paymentData.Email</td>
                <td>
                    <!-- Check if hobbies exist -->
                    @if (paymentData.Order != null && paymentData.Order.Any())
                    {
                        <!-- Display hobbies in a list -->
                        @foreach (var order in paymentData.Order)
                        {
                            <!-- Display hobbies in a list -->
                            <ul>
                                @foreach (var coffee in order.Coffee)
                                {
                                    <li>@coffee.CoffeeName</li>
                                }
                            </ul>
                        }
                      }
                    else
                    {
                        <!-- Display a message if no hobbies -->
                        <span>No Coffee</span>
                    }
                </td>
                <td>
                    <!-- Check if hobbies exist -->
                    @if (paymentData.Order != null && paymentData.Order.Any())
                    {
                        <!-- Display hobbies in a list -->
                        @foreach (var order in paymentData.Order)
                        {
                            <!-- Display hobbies in a list -->
                            <ul>
                                @foreach (var addins in order.AddIns)
                                {
                                    <li>@addins.Name</li>
                                }
                            </ul>
                        }
                    }
                    else
                    {
                        <!-- Display a message if no hobbies -->
                        <span>No Coffee</span>
                    }
                </td>
                <td>
                    <!-- Check if hobbies exist -->
                    @if (paymentData.Order != null && paymentData.Order.Any())
                    {
                        <!-- Display hobbies in a list -->
                        <ul>
                            @foreach (var order in paymentData.Order)
                            {
                                <li>@order.PaymentStatus</li>
                            }
                        </ul>
                    }
                    else
                    {
                        <!-- Display a message if no hobbies -->
                        <span>No hobbies</span>
                    }
                </td>
                <td>@paymentData.PaymentDatetime</td>
                <td>@paymentData.PaidPrice</td>
                
            </tr>
        }
    </tbody>
</table>
@code {
}